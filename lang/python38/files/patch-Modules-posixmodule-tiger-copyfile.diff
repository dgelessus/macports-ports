--- Modules/clinic/posixmodule.c.h.orig
+++ Modules/clinic/posixmodule.c.h
@@ -4975,7 +4975,7 @@
     return return_value;
 }
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && MAC_OS_X_VERSION_MAX_ALLOWED >= 1050
 
 PyDoc_STRVAR(os__fcopyfile__doc__,
 "_fcopyfile($module, infd, outfd, flags, /)\n"
--- Modules/posixmodule.c.orig
+++ Modules/posixmodule.c
@@ -109,7 +109,7 @@
 #include <sys/sendfile.h>
 #endif
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && MAC_OS_X_VERSION_MAX_ALLOWED >= 1050
 #include <copyfile.h>
 #endif
 
@@ -9153,7 +9153,7 @@
 #endif /* HAVE_SENDFILE */
 
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && MAC_OS_X_VERSION_MAX_ALLOWED >= 1050
 /*[clinic input]
 os._fcopyfile
 
@@ -14222,7 +14222,7 @@
 #endif
 #endif
 
-#if defined(__APPLE__)
+#if defined(__APPLE__) && MAC_OS_X_VERSION_MAX_ALLOWED >= 1050
     if (PyModule_AddIntConstant(m, "_COPYFILE_DATA", COPYFILE_DATA)) return -1;
 #endif
 
